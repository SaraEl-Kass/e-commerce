<form [formGroup]="deliveryForm" (ngSubmit)="onSubmit()">
  <div class="add-to-cart-container">
    <div class="delivery-info">
      <h2>Delivery Information</h2>

      <div class="delivery-grid">
        <div
          class="form-group"
          [class.invalid]="
            deliveryForm.get('name')?.invalid &&
            deliveryForm.get('name')?.touched
          "
        >
          <label for="name">Name</label>
          <input
            type="text"
            id="name"
            placeholder="Name"
            formControlName="name"
          />
          <div
            *ngIf="
              deliveryForm.get('name')?.invalid &&
              deliveryForm.get('name')?.touched
            "
          >
            <small class="error">Name is required</small>
          </div>
        </div>
        <div
          class="form-group"
          [class.invalid]="
            deliveryForm.get('mobileNumber')?.invalid &&
            deliveryForm.get('mobileNumber')?.touched
          "
        >
          <label for="mobile-number">Mobile Number</label>
          <input
            type="text"
            id="mobile-number"
            placeholder="Mobile Number"
            formControlName="mobileNumber"
          />
          <div
            *ngIf="
              deliveryForm.get('mobileNumber')?.invalid &&
              deliveryForm.get('mobileNumber')?.touched
            "
          >
            <small class="error">Valid mobile number is required</small>
          </div>
        </div>
        <div
          class="form-group"
          [class.invalid]="
            deliveryForm.get('email')?.invalid &&
            deliveryForm.get('email')?.touched
          "
        >
          <label for="email">Email</label>
          <input
            type="email"
            id="email"
            placeholder="Email"
            formControlName="email"
          />
          <div
            *ngIf="
              deliveryForm.get('email')?.invalid &&
              deliveryForm.get('email')?.touched
            "
          >
            <small class="error">Valid email is required</small>
          </div>
        </div>
        <div
          class="form-group"
          [class.invalid]="
            deliveryForm.get('city')?.invalid &&
            deliveryForm.get('city')?.touched
          "
        >
          <label for="city">City</label>
          <input
            type="text"
            id="city"
            placeholder="City"
            formControlName="city"
          />
          <div
            *ngIf="
              deliveryForm.get('city')?.invalid &&
              deliveryForm.get('city')?.touched
            "
          >
            <small class="error">City is required</small>
          </div>
        </div>
        <div
          class="form-group"
          [class.invalid]="
            deliveryForm.get('state')?.invalid &&
            deliveryForm.get('state')?.touched
          "
        >
          <label for="state">State</label>
          <input
            type="text"
            id="state"
            placeholder="State"
            formControlName="state"
          />
          <div
            *ngIf="
              deliveryForm.get('state')?.invalid &&
              deliveryForm.get('state')?.touched
            "
          >
            <small class="error">State is required</small>
          </div>
        </div>
        <div
          class="form-group"
          [class.invalid]="
            deliveryForm.get('zip')?.invalid && deliveryForm.get('zip')?.touched
          "
        >
          <label for="zip">ZIP</label>
          <input type="text" id="zip" placeholder="ZIP" formControlName="zip" />
          <div
            *ngIf="
              deliveryForm.get('zip')?.invalid &&
              deliveryForm.get('zip')?.touched
            "
          >
            <small class="error">ZIP code is required</small>
          </div>
        </div>
        <div
          class="form-group address"
          [class.invalid]="
            deliveryForm.get('address')?.invalid &&
            deliveryForm.get('address')?.touched
          "
        >
          <label for="address">Address</label>
          <input
            type="text"
            id="address"
            placeholder="Address"
            formControlName="address"
          />
          <div
            *ngIf="
              deliveryForm.get('address')?.invalid &&
              deliveryForm.get('address')?.touched
            "
          >
            <small class="error">Address is required</small>
          </div>
        </div>
      </div>

      <h2>Schedule Delivery</h2>
      <div class="schedule-delivery">
        <div
          class="form-group"
          [class.invalid]="
            deliveryForm.get('date')?.invalid &&
            deliveryForm.get('date')?.touched
          "
        >
          <label for="date">Date</label>
          <input type="date" id="date" formControlName="date" />
          <div
            *ngIf="
              deliveryForm.get('date')?.invalid &&
              deliveryForm.get('date')?.touched
            "
          >
            <small class="error">Delivery date is required</small>
          </div>
        </div>
        <div class="form-group">
          <label for="note">Note</label>
          <textarea id="note" placeholder="Note"></textarea>
        </div>
      </div>

      <h2>Payment Method</h2>
      <div class="payment-method">
        <label>
          <input
            type="radio"
            name="paymentMethod"
            value="online"
            formControlName="paymentMethod"
          />
          Online Payment
        </label>
        <label>
          <input
            type="radio"
            name="paymentMethod"
            value="cod"
            formControlName="paymentMethod"
          />
          Cash on Delivery
        </label>
        <label>
          <input
            type="radio"
            name="paymentMethod"
            value="pos"
            formControlName="paymentMethod"
          />
          POS on Delivery
        </label>
      </div>
    </div>

    <div class="order-summary">
      <h2>Order Summary</h2>
      <div class="ordered-items">
        <div class="product-list">
          <app-ordered-product
            *ngFor="let product of cartItems"
            [product]="product"
            (productRemoved)="onProductRemoved($event)"
          ></app-ordered-product>
        </div>
        <div class="order-total">
          <p>Subtotal: ${{ getSubtotal() }}</p>
          <p>Shipping: ${{ getShipping() }}</p>
          <p>Total (USD): ${{ getTotal() }}</p>
        </div>
        <button class="confirm-order" type="submit">Confirm Order</button>
      </div>
    </div>
  </div>
</form>
